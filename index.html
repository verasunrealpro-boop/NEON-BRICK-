<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ATARI BRICK</title>

<style>
:root{
  --bg:#05070d;
  --ui:#7df9ff;
  --ui2:#ff6bcb;
  --paddle:#4d96ff;
  --brick:#ff6bcb;
  --brickHard:#ff9f43;
  --brickSteel:#6c757d;
  --text:#e6faff;
}

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:"Courier New", monospace;
  image-rendering:pixelated;
}

body{
  background:var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
}

/* BACKGROUND */
.bg{position:absolute;inset:0;z-index:-1;overflow:hidden}
.star{position:absolute;width:2px;height:2px;background:white;opacity:.8}

/* SCREENS */
.screen{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  transition:.4s;
}
.hidden{opacity:0;pointer-events:none}

/* UI BOX */
.box{
  border:2px solid var(--ui);
  padding:28px 40px;
  text-align:center;
  background:#05070dcc;
  animation:pop .4s ease;
}
@keyframes pop{
  from{transform:scale(.8);opacity:0}
  to{transform:scale(1);opacity:1}
}

.box h1,.box h2{
  margin-bottom:20px;
  letter-spacing:4px;
}

.box button{
  margin-top:12px;
  padding:14px 48px;
  background:#fff;
  border:2px solid var(--ui);
  font-weight:bold;
  cursor:pointer;
}

/* MENU */
.menu-buttons{
  display:flex;
  flex-direction:column;
  gap:14px;
}
.menu-buttons button{
  background:transparent;
  border:2px solid var(--ui);
  color:var(--ui);
}
.menu-buttons button.selected{
  background:var(--ui);
  color:#000;
}

/* GAME */
.hud{
  width:320px;
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
  font-size:12px;
  letter-spacing:2px;
}

canvas{
  width:320px;
  height:400px;
  border:2px solid var(--ui);
  background:#000;
  touch-action:none;
}

.controls{
  margin-top:12px;
  display:flex;
  gap:30px;
}
.controls button{
  padding:8px 22px;
  font-size:18px;
  background:transparent;
  border:2px solid var(--ui);
  color:var(--ui);
}
</style>
</head>

<body>

<div class="bg" id="bg"></div>

<!-- MENU -->
<div class="screen" id="menu">
  <div class="box">
    <h1>ATARI<br>BRICK</h1>
    <div class="menu-buttons" id="difficultyButtons">
      <button data-diff="1" class="selected">EASY</button>
      <button data-diff="1.3">MEDIUM</button>
      <button data-diff="1.6">HARD</button>
    </div>
    <button id="confirmBtn">CONFIRM</button>
  </div>
</div>

<!-- START -->
<div class="screen hidden" id="startScreen">
  <div class="box">
    <h2>READY?</h2>
    <button id="startBtn">START</button>
  </div>
</div>

<!-- GAME -->
<div class="screen hidden" id="gameScreen">
  <div class="hud" id="hud"></div>
  <canvas id="game" width="320" height="400"></canvas>
  <div class="controls">
    <button id="left">◀</button>
    <button id="right">▶</button>
  </div>
</div>

<!-- WIN -->
<div class="screen hidden" id="winScreen">
  <div class="box">
    <h2>YOU WIN</h2>
    <button id="nextBtn">NEXT LEVEL</button>
    <button onclick="location.reload()">RESTART</button>
  </div>
</div>

<!-- GAME OVER -->
<div class="screen hidden" id="gameOverScreen">
  <div class="box">
    <h2>GAME OVER</h2>
    <button onclick="location.reload()">RESTART</button>
  </div>
</div>

<script>
/* BACKGROUND */
const bg=document.getElementById("bg");
const stars=[];
for(let i=0;i<140;i++){
  const s=document.createElement("div");
  s.className="star";
  s.y=Math.random()*100;
  s.speed=Math.random()*0.6+0.2;
  s.style.left=Math.random()*100+"%";
  bg.appendChild(s);
  stars.push(s);
}

/* AUDIO */
const audio=new (window.AudioContext||webkitAudioContext)();
function beep(f,d=.1){
  if(audio.state==="suspended")audio.resume();
  const o=audio.createOscillator(),g=audio.createGain();
  o.type="square";
  o.frequency.value=f;
  g.gain.value=.08;
  o.connect(g);g.connect(audio.destination);
  o.start();o.stop(audio.currentTime+d);
}

/* GAME VARS */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
ctx.imageSmoothingEnabled=false;

let difficulty=1,level=1;
let score=0,lives=3,paused=false,last=0;
let shake=0;

const paddle={x:120,y:370,w:80,h:10,target:120,baseW:80};
const ball={x:160,y:200,r:4,dx:0,dy:0,max:420};

let bricks=[],particles=[],powerUps=[];
let moveL=false,moveR=false;

/* INPUT */
left.onpointerdown=()=>moveL=true;
left.onpointerup=left.onpointerleave=()=>moveL=false;
right.onpointerdown=()=>moveR=true;
right.onpointerup=right.onpointerleave=()=>moveR=false;

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft")moveL=true;
  if(e.key==="ArrowRight")moveR=true;
});
document.addEventListener("keyup",e=>{
  if(e.key==="ArrowLeft")moveL=false;
  if(e.key==="ArrowRight")moveR=false;
});

/* MENU */
document.querySelectorAll("#difficultyButtons button").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll("#difficultyButtons button").forEach(x=>x.classList.remove("selected"));
    b.classList.add("selected");
    difficulty=parseFloat(b.dataset.diff);
    beep(600);
  };
});
confirmBtn.onclick=()=>{
  beep(900);
  menu.classList.add("hidden");
  startScreen.classList.remove("hidden");
};
startBtn.onclick=()=>{
  beep(800);
  startScreen.classList.add("hidden");
  gameScreen.classList.remove("hidden");
  startLevel();
};
nextBtn.onclick=()=>{
  level++;
  winScreen.classList.add("hidden");
  gameScreen.classList.remove("hidden");
  startLevel();
};

/* LEVEL */
function createBricks(){
  bricks=[];
  let rows=3+level;
  for(let r=0;r<rows;r++){
    for(let c=0;c<8;c++){
      let t=Math.random();
      let type=t>.85?"steel":t>.6?"hard":"normal";
      bricks.push({
        x:c*38+10,
        y:r*18+30,
        w:34,h:12,
        life:type==="hard"?2:type==="steel"?999:1,
        type
      });
    }
  }
}

function resetBall(){
  ball.x=160;
  ball.y=200;
  ball.dx=(160+level*15)*difficulty*(Math.random()<.5?-1:1);
  ball.dy=-(160+level*15)*difficulty;
}

function startLevel(){
  createBricks();
  resetBall();
  paused=false;
  last=performance.now();
  requestAnimationFrame(loop);
}

/* UPDATE */
function update(dt){
  if(paused)return;

  stars.forEach(s=>{
    s.y+=s.speed*(menu.classList.contains("hidden")?.4:1);
    if(s.y>100)s.y=0;
    s.style.top=s.y+"%";
  });

  hud.innerText=`LEVEL ${level}  SCORE ${score}  LIVES ${lives}`;

  if(moveL)paddle.target-=320*dt;
  if(moveR)paddle.target+=320*dt;
  paddle.target=Math.max(0,Math.min(canvas.width-paddle.w,paddle.target));
  paddle.x+=(paddle.target-paddle.x)*0.25;

  ball.x+=ball.dx*dt;
  ball.y+=ball.dy*dt;

  if(Math.abs(ball.dx)>ball.max)ball.dx=Math.sign(ball.dx)*ball.max;
  if(Math.abs(ball.dy)>ball.max)ball.dy=Math.sign(ball.dy)*ball.max;

  if(ball.x-ball.r<0||ball.x+ball.r>canvas.width){
    ball.dx*=-1;beep(300);
  }
  if(ball.y-ball.r<0){
    ball.dy*=-1;beep(800);
  }

  if(ball.y+ball.r>=paddle.y&&ball.x>paddle.x&&ball.x<paddle.x+paddle.w){
    let hit=(ball.x-paddle.x)/paddle.w-.5;
    ball.dx=hit*420;
    ball.dy=-Math.abs(ball.dy);
    beep(500);
  }

  bricks.forEach(b=>{
    if(b.life>0&&ball.x>b.x&&ball.x<b.x+b.w&&ball.y>b.y&&ball.y<b.y+b.h){
      b.life--;
      ball.dy*=-1;
      score+=10*level;
      shake=5;
      beep(900);
    }
  });

  if(bricks.every(b=>b.life<=0||b.type==="steel")){
    paused=true;
    gameScreen.classList.add("hidden");
    winScreen.classList.remove("hidden");
    beep(1200,.2);
  }

  if(ball.y-ball.r>canvas.height){
    lives--;
    beep(120,.3);
    if(lives<=0){
      paused=true;
      gameScreen.classList.add("hidden");
      gameOverScreen.classList.remove("hidden");
    }else resetBall();
  }
}

/* RENDER */
function render(){
  ctx.save();
  if(shake){
    ctx.translate((Math.random()-.5)*shake,(Math.random()-.5)*shake);
    shake*=.8;
  }

  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--paddle");
  ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);

  ctx.fillStyle="#7df9ff";
  ctx.beginPath();
  ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
  ctx.fill();

  bricks.forEach(b=>{
    if(b.life>0){
      ctx.fillStyle=b.type==="hard"?"#ff9f43":b.type==="steel"?"#6c757d":"#ff6bcb";
      ctx.fillRect(b.x,b.y,b.w,b.h);
    }
  });

  ctx.restore();
}

function loop(t){
  let dt=(t-last)/1000;
  last=t;
  update(dt);
  render();
  if(!paused)requestAnimationFrame(loop);
}
</script>
</body>
</html>
